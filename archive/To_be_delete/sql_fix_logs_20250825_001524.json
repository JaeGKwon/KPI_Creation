[
  {
    "kpi_name": "Categories Above Average Sort Value",
    "table_name": "tb_market_category",
    "original_sql": "SELECT COUNT(*) FROM tb_market_category WHERE sort > (SELECT AVG(sort) FROM tb_market_category WHERE sort IS NOT NULL)",
    "fixed_sql": "SELECT COUNT(*) \nFROM tb_market_category \nWHERE sort > (SELECT AVG(sort) FROM tb_market_category WHERE sort IS NOT NULL)",
    "fixes_applied": [
      "Applied LLM-based SQL fixes"
    ],
    "timestamp": "2025-08-25T00:14:27.442984"
  },
  {
    "kpi_name": "Categories Below Average Sort Value",
    "table_name": "tb_market_category",
    "original_sql": "SELECT COUNT(*) FROM tb_market_category WHERE sort < (SELECT AVG(sort) FROM tb_market_category WHERE sort IS NOT NULL)",
    "fixed_sql": "SELECT COUNT(*) \nFROM tb_market_category \nWHERE sort < (SELECT AVG(sort) FROM tb_market_category WHERE sort IS NOT NULL)",
    "fixes_applied": [
      "Applied LLM-based SQL fixes"
    ],
    "timestamp": "2025-08-25T00:14:30.514730"
  },
  {
    "kpi_name": "Average Child Categories",
    "table_name": "tb_market_category",
    "original_sql": "SELECT AVG(child_count) FROM (SELECT parent_category_id, COUNT(*) as child_count FROM tb_market_category GROUP BY parent_category_id) as subquery",
    "fixed_sql": "SELECT AVG(child_count) \nFROM (\n    SELECT parent_category_id, COUNT(*) as child_count \n    FROM tb_market_category \n    GROUP BY parent_category_id\n) subquery;",
    "fixes_applied": [
      "Applied LLM-based SQL fixes"
    ],
    "timestamp": "2025-08-25T00:14:44.339993"
  },
  {
    "kpi_name": "Parent Categories Without Children",
    "table_name": "tb_market_category",
    "original_sql": "SELECT COUNT(*) FROM (SELECT parent_category_id, COUNT(*) as child_count FROM tb_market_category GROUP BY parent_category_id) as subquery WHERE child_count = 0",
    "fixed_sql": "SELECT COUNT(*) \nFROM (\n    SELECT parent_category_id, COUNT(*) as child_count \n    FROM tb_market_category \n    GROUP BY parent_category_id\n) as subquery \nWHERE child_count = 0;",
    "fixes_applied": [
      "Applied LLM-based SQL fixes"
    ],
    "timestamp": "2025-08-25T00:14:47.411108"
  },
  {
    "kpi_name": "Parent Categories With Children",
    "table_name": "tb_market_category",
    "original_sql": "SELECT COUNT(*) FROM (SELECT parent_category_id, COUNT(*) as child_count FROM tb_market_category GROUP BY parent_category_id) as subquery WHERE child_count > 0",
    "fixed_sql": "SELECT COUNT(*) \nFROM (\n    SELECT parent_category_id, COUNT(*) as child_count \n    FROM tb_market_category \n    GROUP BY parent_category_id\n) as subquery \nWHERE child_count > 0;",
    "fixes_applied": [
      "Applied LLM-based SQL fixes"
    ],
    "timestamp": "2025-08-25T00:14:50.996403"
  }
]